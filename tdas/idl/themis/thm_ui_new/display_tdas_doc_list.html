<!-- This file was generated by mk_html_help.pro -->
<html>
 
<head>
<TITLE>themis/thm_ui_new/display</TITLE>
</head>
 
<body>
<P>
This page was created by the IDL library routine 
<CODE>mk_html_help2</CODE>.
<br>
<P>
<STRONG>Last modified: </STRONG>Wed Apr 14 11:49:06 2010.<P>
 
<HR>
 
<A NAME="ROUTINELIST">
<H1>Directory Listing of Routines</H1></A>
<UL>
<H1>themis/thm_ui_new/display</H1>
<LI><A HREF="#THM_UI_DRAW_EVENT">THM_UI_DRAW_EVENT</A>
<br>This routine handles all events that occur in the draw window
<LI><A HREF="#THM_UI_DRAW_OBJECT">THM_UI_DRAW_OBJECT</A>
<br>This object generates an object graphics tree using the IDLgr* objects that are built
<LI><A HREF="#THM_UI_DRAW_OBJECT__DEFINE[1]">THM_UI_DRAW_OBJECT__DEFINE[1]</A>
<LI><A HREF="#THM_UI_DRAW_OBJECT__DEFINE[2]">THM_UI_DRAW_OBJECT__DEFINE[2]</A>
<LI><A HREF="#THM_UI_DRAW_SAVE">THM_UI_DRAW_SAVE</A>
<LI><A HREF="#THM_UI_MAKE_SPEC">THM_UI_MAKE_SPEC</A>
<LI><A HREF="#THM_UI_ORIENTATION_UPDATE">THM_UI_ORIENTATION_UPDATE</A>
<LI><A HREF="#THM_UI_XYCLIP">THM_UI_XYCLIP</A>
<LI><A HREF="#THM_UI_XYZCLIP">THM_UI_XYZCLIP</A>
<br>
</UL><P>
<HR>
 
<H1>Routine Descriptions</H1>
<A NAME="THM_UI_DRAW_EVENT">
<H2>THM_UI_DRAW_EVENT</H2></A>
<A HREF="#THM_UI_DRAW_OBJECT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
NAME:  
 thm_ui_draw_event

PURPOSE:
 This routine handles all events that occur in the draw window

CALLING SEQUENCE:
 info=thm_ui_draw_event(event, info)

INPUT:
 event - the structure from the draw window event
 info - the main information structure from splash_gui

OUTPUT:
 info - the updated main information structure
 
HISTORY:

$LastChangedBy: cgoethel_new $
$LastChangedDate: 2009-07-02 12:55:47 -0700 (Thu, 02 Jul 2009) $
$LastChangedRevision: 6383 $
$URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/thmsoc/tags/tdas_5_21/idl/themis/thm_ui_new/display/thm_ui_draw_event.pro $
</PRE><P>
<STRONG>(See <A href="display/thm_ui_draw_event.pro">themis/thm_ui_new/display/thm_ui_draw_event.pro</A>)</STRONG><P>
<HR>
 
<A NAME="THM_UI_DRAW_OBJECT">
<H2>THM_UI_DRAW_OBJECT</H2></A>
<A HREF="#THM_UI_DRAW_EVENT">[Previous Routine]</A>
<A HREF="#THM_UI_DRAW_OBJECT__DEFINE[1]">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
NAME:
 thm_ui_draw_object

PURPOSE:
 This object generates an object graphics tree using the IDLgr* objects that are built
 into IDL.  It generates this tree by querying the loaded data object and the window storage
 object to get the settings generated by the panel.  This object also performs other utility
 operations related to drawing.  These include animations of vertical bars and markers, updating
 the legend by performing a lookup in a hashed version of the plotted data, and reporting information
 about the current display.(Cursor segment selected,  range of displayed data, etc...)

 There are a few major functions in this object.
 #1 'update': will update the draw area to correspond to new settings
 #2 'setCursor' : actually makes the draw object do all the animation updates
 #3 'draw' : use it to force the object to redraw the draw area.\
 #4 'getInfo(panelIndex)' : get a struct with information about a panel in the currently drawn display
                            This includes information like the actual range and scaling for each axis, the number of tics, etc...

NOTES:
 1. May want to try to split functions organizationally into functions related to update and static drawing, vs.
    functions related to setCursor and dynamic drawing.
    
 2. In almost all cases ranges will be stored and passed around as 2-element arrays.
    If they are on log scaled axis, the ranges will be in log space, this tends to make some calculations simpler(and others more complex)
    By log space, I mean, if scaling eq 1 then range = alog10(normalRange), if scaling eq 2 then range = alog(normalRange)
    
 3. The codes used for different scaling values are consistent.  0 indicates linear scaling, 1 indicates base 10 logarithm, 2 indicates natural logarithm
 
 4. Positions in this code are generally specified in one of three different coordinate systems.  
    a.  They are normalized to the draw area.  So [.5,.5] is the center of the draw area.
    b.  They are normalized to the panel.  So [.5,.5] is the center of a panel.
    c.  They are specified in pixels.  Often when pixels are used, the value used may actually be 2x or 4x the actual number of screen pixels to prevent aliasing.
    
    Somewhat ambiguously, c. is sometimes called points(because it is a scaled number of pixels).  This is not the same as the measurement in note 5.
 
    Rectangles(like panels) will normally be specified using two variables, which are each 2 element doubles.
    xpos = [xstart,xstop],  ypos = [ystart,stop]  These are absolute locations. 
    The alternative representation [xstart,xsize],[ystart,ysize], is rarely, if ever, used as a parameter,
    although sizes are used for various computations throughout the code.
    
 5. distances that aren't specified in the above coordinates are often specified in pts. 
    This is a desktop publishing standard, that ideally is consistent across output devices.  1 pt should be 127/360 mm.
    The goal is to make all output consistent across output devices.
    
 

$LastChangedBy: pcruce $
$LastChangedDate: 2010-03-03 12:08:53 -0800 (Wed, 03 Mar 2010) $
$LastChangedRevision: 7393 $
$URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/thmsoc/tags/tdas_5_21/idl/themis/thm_ui_new/display/thm_ui_draw_object__define.pro $
</PRE><P>
<STRONG>(See <A href="display/thm_ui_draw_object__define.pro">themis/thm_ui_new/display/thm_ui_draw_object__define.pro</A>)</STRONG><P>
<HR>
 
<A NAME="THM_UI_DRAW_OBJECT__DEFINE[1]">
<H2>THM_UI_DRAW_OBJECT__DEFINE[1]</H2></A>
<A HREF="#THM_UI_DRAW_OBJECT">[Previous Routine]</A>
<A HREF="#THM_UI_DRAW_OBJECT__DEFINE[2]">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
Procedure: thm_ui_draw::getSpecModel

Purpose:  This procedure finishes the creation of a spectral image.
          It uses the newly calculated range and the information in plotdata

Inputs: 
  plotData(struct):  The plotData struct that was returned from getSpecRef, contains plotting information, like scaling, data position and clipping
  zrange(2 element double):  The z range of the panel, after recalculating for closer autorange fit, if necessary.
  palette(long): The number of the palette that will be used to draw this spectral plot
Outputs:
  model(IDLgrModel):  The model that the result is stored in.

</PRE><P>
<STRONG>(See <A href="display/thm_ui_draw_object__define.pro">themis/thm_ui_new/display/thm_ui_draw_object__define.pro</A>)</STRONG><P>
<HR>
 
<A NAME="THM_UI_DRAW_OBJECT__DEFINE[2]">
<H2>THM_UI_DRAW_OBJECT__DEFINE[2]</H2></A>
<A HREF="#THM_UI_DRAW_OBJECT__DEFINE[1]">[Previous Routine]</A>
<A HREF="#THM_UI_DRAW_SAVE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>

 Function: thm_ui_draw::makeSpec

Purpose:
  helper routine for draw object.  It helps construct the image for spectrograms
  very quickly.

Inputs:
  x: the 1-d x scaling values for the z components(x-axis)
  y: the 1-d y scaling values for the z components
  z: the 2-d z array of values for the image
  pixx: the desired resolution of the output on the x-axis
  pixy: the desired resolution of the output on the y-axis

Output:
   refz: The gridded z-axis array
   refx: The x-values associated with the z-values
   refy: The y-values associated with the z-values
   
   Notes:
   1. This uses an alpha channel to make all NaNs transparent.
   2. PixX and PixY are not totally necessary because object graphics can
      stretch an image quite well, but selecting the resolution of the screen
      with them prevents any inadvertent errors from showing up during interpolation.
      It might actually be better to render the image at twice the screen resolution
      to prevent aliasing errors.
   
$LastChangedBy: pcruce $
$LastChangedDate: 2010-03-03 12:08:53 -0800 (Wed, 03 Mar 2010) $
$LastChangedRevision: 7393 $
$URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/thmsoc/tags/tdas_5_21/idl/themis/thm_ui_new/display/thm_ui_draw_object__define.pro $
</PRE><P>
<STRONG>(See <A href="display/thm_ui_draw_object__define.pro">themis/thm_ui_new/display/thm_ui_draw_object__define.pro</A>)</STRONG><P>
<HR>
 
<A NAME="THM_UI_DRAW_SAVE">
<H2>THM_UI_DRAW_SAVE</H2></A>
<A HREF="#THM_UI_DRAW_OBJECT__DEFINE[2]">[Previous Routine]</A>
<A HREF="#THM_UI_MAKE_SPEC">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
NAME:
  thm_ui_draw_save

Purpose:
   Outputs current window content into various formats



$LastChangedBy: pcruce $
$LastChangedDate: 2009-06-22 10:51:02 -0700 (Mon, 22 Jun 2009) $
$LastChangedRevision: 6296 $
$URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/thmsoc/tags/tdas_5_21/idl/themis/thm_ui_new/display/thm_ui_draw_save__define.pro $
</PRE><P>
<STRONG>(See <A href="display/thm_ui_draw_save__define.pro">themis/thm_ui_new/display/thm_ui_draw_save__define.pro</A>)</STRONG><P>
<HR>
 
<A NAME="THM_UI_MAKE_SPEC">
<H2>THM_UI_MAKE_SPEC</H2></A>
<A HREF="#THM_UI_DRAW_SAVE">[Previous Routine]</A>
<A HREF="#THM_UI_ORIENTATION_UPDATE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>

 Function: thm_ui_make_spec

 NOTE: This code has been incorporated into the draw object.  
 thm_ui_make_spec is no longer called directly

Purpose:
  helper routine for draw object.  It helps construct the image for spectrograms
  very quickly.

Inputs:
  x: the 1-d x scaling values for the z components(x-axis)
  y: the 1-d y scaling values for the z components
  z: the 2-d z array of values for the image
  pixx: the desired resolution of the output on the x-axis
  pixy: the desired resolution of the output on the y-axis
  palette: the palette number to be used when creating the image
  zrange: the zrange for the whole panel(may be larger than the range of the z argument)

Output:
   An rgba image with dimensions: 4 x PixX x PixY
   
   Notes:
   1. This uses an alpha channel to make all NaNs transparent.
   2. PixX and PixY are not totally necessary because object graphics can
      stretch an image quite well, but selecting the resolution of the screen
      with them prevents any inadvertent errors from showing up during interpolation.
      It might actually be better to render the image at twice the screen resolution
      to prevent aliasing errors.
   
$LastChangedBy: pcruce $
$LastChangedDate: 2009-03-12 10:27:51 -0700 (Thu, 12 Mar 2009) $
$LastChangedRevision: 5262 $
$URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/thmsoc/tags/tdas_5_21/idl/themis/thm_ui_new/display/thm_ui_make_spec.pro $
</PRE><P>
<STRONG>(See <A href="display/thm_ui_make_spec.pro">themis/thm_ui_new/display/thm_ui_make_spec.pro</A>)</STRONG><P>
<HR>
 
<A NAME="THM_UI_ORIENTATION_UPDATE">
<H2>THM_UI_ORIENTATION_UPDATE</H2></A>
<A HREF="#THM_UI_MAKE_SPEC">[Previous Routine]</A>
<A HREF="#THM_UI_XYCLIP">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>

Purpose:
  helper function, just colocates some replicated code to modify the
  canvas size if there is variation when windows or modes are switched.
 

$LastChangedBy: pcruce $
$LastChangedDate: 2009-08-03 11:29:44 -0700 (Mon, 03 Aug 2009) $
$LastChangedRevision: 6519 $
$URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/thmsoc/tags/tdas_5_21/idl/themis/thm_ui_new/display/thm_ui_orientation_update.pro $
</PRE><P>
<STRONG>(See <A href="display/thm_ui_orientation_update.pro">themis/thm_ui_new/display/thm_ui_orientation_update.pro</A>)</STRONG><P>
<HR>
 
<A NAME="THM_UI_XYCLIP">
<H2>THM_UI_XYCLIP</H2></A>
<A HREF="#THM_UI_ORIENTATION_UPDATE">[Previous Routine]</A>
<A HREF="#THM_UI_XYZCLIP">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>

Procedure: thm_ui_xyclip

; NOTE: This code has been incorporated into the draw object.  
 thm_ui_xyclip is no longer called directly

Purpose:
  helper routine for draw object.  It performs some processing
  on the x,y,z trace inputs

Inputs:
  onePtr: the values being clipped
  twoPtr: the axis for which paired values must also be removed
  zPtr: the z for spectral plots
  range: the range for the clipping
  scale: the scaling for the axis(0:linear,1:log10,2:logN)
  
Keywords: fail: 1: indicates that the routine failed
       
          transposez: if this keyword is set, then one is a y-axis not an x-axis

   
Notes:
  Scales &amp; Clips the x,y axes. Mutates onePtr,twoPtr,zPtr

   
$LastChangedBy: pcruce $
$LastChangedDate: 2009-03-12 10:27:51 -0700 (Thu, 12 Mar 2009) $
$LastChangedRevision: 5262 $
$URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/thmsoc/tags/tdas_5_21/idl/themis/thm_ui_new/display/thm_ui_xyclip.pro $
</PRE><P>
<STRONG>(See <A href="display/thm_ui_xyclip.pro">themis/thm_ui_new/display/thm_ui_xyclip.pro</A>)</STRONG><P>
<HR>
 
<A NAME="THM_UI_XYZCLIP">
<H2>THM_UI_XYZCLIP</H2></A>
<A HREF="#THM_UI_XYCLIP">[Previous Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>

Procedure: thm_ui_xyclip

Purpose:
  helper routine for draw object.  It performs some processing
  on the z trace inputs

Inputs:
  zptr: array of ptrs to z values for this trace(2-d array)
  zrange: the range for the z-axis on this panel
  zscale: scaling for z-axis(0:linear,1:log10,2:logN) 
      
  
Keywords: fail: 1: indicates that the routine failed
          
          

   
Notes:
  Scales &amp; Clips the axes and the z-plot correspondingly
  Mutates Zptr

   
$LastChangedBy: pcruce $
$LastChangedDate: 2009-02-09 14:50:07 -0800 (Mon, 09 Feb 2009) $
$LastChangedRevision: 4923 $
$URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/thmsoc/tags/tdas_5_21/idl/themis/thm_ui_new/display/thm_ui_xyzclip.pro $
</PRE><P>
<STRONG>(See <A href="display/thm_ui_xyzclip.pro">themis/thm_ui_new/display/thm_ui_xyzclip.pro</A>)</STRONG><P>
<HR>
 
